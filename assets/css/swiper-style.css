/**
 * Custom styles for Shared Albums for Google Photos (by JanZeman) plugin
 */

.jzsa-album {
    width: 100%;
    height: 100%;
    /* Use configurable background; fallback to black if not set */
background-color: var(--gallery-bg-color, #FFFFFF);
    position: relative; /* For loader overlay positioning */
}

/* Make sure all structural layers share the same background color */
.jzsa-album,
.jzsa-album .swiper,
.jzsa-album .swiper-wrapper,
.jzsa-album .swiper-slide,
.jzsa-album .swiper-zoom-container {
    background-color: var(--gallery-bg-color, #FFFFFF);
}

.jzsa-album .swiper-slide img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    width: auto;
    height: auto;
}

/* image-fit="cover" - fill container, may crop */
.jzsa-album[data-image-fit="cover"] .swiper-slide img {
    object-fit: cover;
    width: 100%;
    height: 100%;
}

/* image-fit="stretch" - fill container, may distort */
.jzsa-album[data-image-fit="stretch"] .swiper-slide img {
    width: 100%;
    height: 100%;
    object-fit: fill;
}

/* Navigation buttons */
.jzsa-album .swiper-button-next,
.jzsa-album .swiper-button-prev {
    color: #fff;
    background: rgba(0, 0, 0, 0.5);
    width: 44px;
    height: 44px;
    border-radius: 50%;
}

.jzsa-album .swiper-button-next:after,
.jzsa-album .swiper-button-prev:after {
    font-size: 20px;
}

.jzsa-album .swiper-button-next:hover,
.jzsa-album .swiper-button-prev:hover {
    background: rgba(0, 0, 0, 0.7);
}

/* External link button */
.jzsa-album .swiper-button-external-link {
    position: absolute;
    top: 10px;
    left: 10px;
    width: 40px;
    height: 40px;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 4px;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
}

.jzsa-album .swiper-button-external-link:hover {
    background: rgba(0, 0, 0, 0.7);
}

.jzsa-album .swiper-button-external-link:after {
    content: '';
    display: block;
    width: 20px;
    height: 20px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* Download button */
.jzsa-album .swiper-button-download {
    position: absolute;
    top: 10px;
    left: 10px;
    width: 40px;
    height: 40px;
    background: rgba(0, 0, 0, 0.5);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    z-index: 10;
    display: none;
    align-items: center;
    justify-content: center;
}

.jzsa-album[data-show-download-button="true"] .swiper-button-download {
    display: flex;
}

/* When both link and download buttons are visible, move download button to the right */
.jzsa-album[data-show-link-button="true"][data-show-download-button="true"] .swiper-button-download {
    left: 60px;
}

.jzsa-album .swiper-button-download:hover {
    background: rgba(0, 0, 0, 0.7);
}

.jzsa-album .swiper-button-download:after {
    content: '';
    display: block;
    width: 20px;
    height: 20px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* Autoplay progress bar (only visible when autoplay is running) */
.jzsa-album .swiper-autoplay-progress {
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    width: 39px;
    height: 2px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 1px;
    z-index: 10;
    display: block;
    overflow: hidden;
}

/* In fullscreen mode, position it below the raised pagination */
.jzsa-album.jzsa-is-fullscreen .swiper-autoplay-progress {
    bottom: 12px;
}

.jzsa-album .swiper-autoplay-progress-bar {
    height: 100%;
    width: 100%;
    background: rgba(255, 255, 255, 0.8);
    transform-origin: left;
    transition: transform linear;
}

/* Play/Pause button (only visible in fullscreen) */
.jzsa-album .swiper-button-play-pause {
    position: absolute;
    bottom: 65px;
    left: 50%;
    transform: translateX(-50%);
    width: 50px;
    height: 50px;
    background: rgba(0, 0, 0, 0.5);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    z-index: 10;
    display: none;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Show play/pause button only in fullscreen - using JS class toggle */
.jzsa-album.jzsa-is-fullscreen .swiper-button-play-pause {
    display: flex;
}

.jzsa-album .swiper-button-play-pause:hover {
    background: rgba(0, 0, 0, 0.7);
}

/* Play icon (default) */
.jzsa-album .swiper-button-play-pause:after {
    content: '';
    display: block;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 10px 0 10px 16px;
    border-color: transparent transparent transparent white;
    margin-left: 3px;
}

/* Pause icon (when playing) */
.jzsa-album .swiper-button-play-pause.playing:after {
    width: 14px;
    height: 20px;
    border-width: 0 3px;
    border-color: white;
    border-style: solid;
    border-left-width: 3px;
    border-right-width: 3px;
    border-top-width: 0;
    border-bottom-width: 0;
    margin-left: 0;
}

/* Fullscreen button */
.jzsa-album .swiper-button-fullscreen {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 40px;
    height: 40px;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 4px;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
}

.jzsa-album .swiper-button-fullscreen:hover {
    background: rgba(0, 0, 0, 0.7);
}

.jzsa-album .swiper-button-fullscreen:after {
    content: '';
    display: block;
    width: 20px;
    height: 20px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* When in fullscreen, show exit fullscreen icon */
.jzsa-album:fullscreen .swiper-button-fullscreen:after,
.jzsa-album:-webkit-full-screen .swiper-button-fullscreen:after,
.jzsa-album:-moz-full-screen .swiper-button-fullscreen:after,
.jzsa-album:-ms-fullscreen .swiper-button-fullscreen:after {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg>');
}

/* Fullscreen mode styling */
.jzsa-album:fullscreen,
.jzsa-album:-webkit-full-screen,
.jzsa-album:-moz-full-screen,
.jzsa-album:-ms-fullscreen {
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw;
    max-height: 100vh;
background-color: var(--gallery-bg-color, #FFFFFF);
}

/* Pseudo fullscreen styling for iPhone (CSS-based fallback) */
.jzsa-album.jzsa-pseudo-fullscreen {
    position: fixed;
    inset: 0;
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw;
    max-height: 100vh;
background-color: var(--gallery-bg-color, #FFFFFF);
    z-index: 9999;
}

html.jzsa-no-scroll,
body.jzsa-no-scroll {
    overflow: hidden;
    height: 100%;
}

/* Album title */
.jzsa-album .swiper-album-title {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 600;
    z-index: 10;
    max-width: 80%;
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* Pagination */
.jzsa-album .swiper-pagination {
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    padding: 4px 16px;
    border-radius: 20px;
    display: inline-block;
    left: 10px;
    right: 10px;
    margin: 0 auto;
    max-width: max-content;
    width: auto;
    font-size: 14px;
    text-align: center;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Move pagination up in fullscreen to make room for progress bar below */
.jzsa-album.jzsa-is-fullscreen .swiper-pagination {
    bottom: 25px;
}

/* Loading state */
.jzsa-album .swiper-lazy-loading {
    opacity: 0.5;
}

/* Progressive image loading */
.jzsa-album .jzsa-progressive-image {
    transition: opacity 0.3s ease-in-out;
}

.jzsa-album .jzsa-progressive-image.jzsa-full-loaded {
    opacity: 1;
}

/* Image error placeholder */
.jzsa-album .jzsa-progressive-image.jzsa-image-error {
    position: relative;
    background: #2a2a2a;
    display: flex;
    align-items: center;
    justify-content: center;
}

.jzsa-album .jzsa-progressive-image.jzsa-image-error::before {
    content: '';
    position: absolute;
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.1);
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.jzsa-album .jzsa-progressive-image.jzsa-image-error::after {
    content: 'âœ•';
    position: absolute;
    font-size: 48px;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 300;
    line-height: 1;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

/* Custom background color support (redundant but kept for clarity) */
.jzsa-album[data-background-color] {
    background-color: var(--gallery-bg-color, #FFFFFF);
}

/* Carousel mode specific styles */
.jzsa-album[data-mode="carousel"] .swiper-slide {
    width: auto;
    height: auto;
}

.jzsa-album[data-mode="carousel"] .swiper-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 4px;
}

/* Carousel mode - adjust image sizing */
.jzsa-album[data-mode="carousel"] .swiper-zoom-container {
    width: 100%;
    height: 100%;
}

/* Disable zoom cursor in carousel mode */
.jzsa-album[data-mode="carousel"] .swiper-slide {
    cursor: default;
}

/* Full screen navigation - cursor feedback and mobile tap highlight removal (only in fullscreen) */
.jzsa-album:fullscreen[data-full-screen-navigation="single-click"] .swiper-slide,
.jzsa-album:fullscreen[data-full-screen-navigation="double-click"] .swiper-slide,
.jzsa-album:-webkit-full-screen[data-full-screen-navigation="single-click"] .swiper-slide,
.jzsa-album:-webkit-full-screen[data-full-screen-navigation="double-click"] .swiper-slide,
.jzsa-album:-moz-full-screen[data-full-screen-navigation="single-click"] .swiper-slide,
.jzsa-album:-moz-full-screen[data-full-screen-navigation="double-click"] .swiper-slide,
.jzsa-album:-ms-fullscreen[data-full-screen-navigation="single-click"] .swiper-slide,
.jzsa-album:-ms-fullscreen[data-full-screen-navigation="double-click"] .swiper-slide {
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Left half cursor (previous) - only in fullscreen */
.jzsa-album:fullscreen[data-full-screen-navigation="single-click"] .swiper-slide:hover,
.jzsa-album:fullscreen[data-full-screen-navigation="double-click"] .swiper-slide:hover,
.jzsa-album:-webkit-full-screen[data-full-screen-navigation="single-click"] .swiper-slide:hover,
.jzsa-album:-webkit-full-screen[data-full-screen-navigation="double-click"] .swiper-slide:hover,
.jzsa-album:-moz-full-screen[data-full-screen-navigation="single-click"] .swiper-slide:hover,
.jzsa-album:-moz-full-screen[data-full-screen-navigation="double-click"] .swiper-slide:hover,
.jzsa-album:-ms-fullscreen[data-full-screen-navigation="single-click"] .swiper-slide:hover,
.jzsa-album:-ms-fullscreen[data-full-screen-navigation="double-click"] .swiper-slide:hover {
    cursor: w-resize;
}

/* Right half cursor (next) - using pseudo-element trick - only in fullscreen */
.jzsa-album:fullscreen[data-full-screen-navigation="single-click"] .swiper-slide::after,
.jzsa-album:fullscreen[data-full-screen-navigation="double-click"] .swiper-slide::after,
.jzsa-album:-webkit-full-screen[data-full-screen-navigation="single-click"] .swiper-slide::after,
.jzsa-album:-webkit-full-screen[data-full-screen-navigation="double-click"] .swiper-slide::after,
.jzsa-album:-moz-full-screen[data-full-screen-navigation="single-click"] .swiper-slide::after,
.jzsa-album:-moz-full-screen[data-full-screen-navigation="double-click"] .swiper-slide::after,
.jzsa-album:-ms-fullscreen[data-full-screen-navigation="single-click"] .swiper-slide::after,
.jzsa-album:-ms-fullscreen[data-full-screen-navigation="double-click"] .swiper-slide::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 50%;
    height: 100%;
    cursor: e-resize;
}

/* Gallery loading overlay (shown until first image is ready) */
.jzsa-album .jzsa-loader {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at top, rgba(255, 255, 255, 0.08), rgba(0, 0, 0, 0.85));
    color: #fff;
    z-index: 20;
    pointer-events: none;
    opacity: 1;
    transition: opacity 0.35s ease-in-out;
}

.jzsa-album.jzsa-loaded .jzsa-loader {
    opacity: 0;
    visibility: hidden;
}

.jzsa-loader-inner {
    text-align: center;
    padding: 16px 24px;
    border-radius: 10px;
    background: rgba(0, 0, 0, 0.65);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.45);
}

.jzsa-loader-spinner {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.35);
    border-top-color: #ffffff;
    margin: 0 auto 10px;
    animation: jzsa-spin 0.9s linear infinite;
}

.jzsa-loader-text {
    font-size: 13px;
    letter-spacing: 0.02em;
    opacity: 0.9;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

@keyframes jzsa-spin {
    to {
        transform: rotate(360deg);
    }
}

/* Gesture hints overlay */
.jzsa-hint {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.85);
    color: #fff;
    padding: 16px 24px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    z-index: 9999;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    text-align: center;
    max-width: 90%;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
}

.jzsa-hint-visible {
    opacity: 1;
}

/* ============================================================================
   Carousel-to-player tweaks
   ============================================================================ */

/* Make it clear slides are clickable in carousel-to-player mode */
.jzsa-album[data-mode="carousel-to-player"] .swiper-slide {
    cursor: pointer;
}

.jzsa-album[data-mode="carousel-to-player"] .swiper-slide:hover {
    opacity: 0.9;
    transition: opacity 0.2s ease;
}
